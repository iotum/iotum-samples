"use strict";(self.webpackChunkiotum_samples=self.webpackChunkiotum_samples||[]).push([[528],{1891:function(t,o,n){var a=n(2791),e=n(9434),c=n(9074),i=n(27),r=n(184);o.Z=function(t){var o=(0,a.useRef)(null),n=(0,e.v9)((function(t){return t.credentials}));return(0,a.useEffect)((function(){var a=n.domain||"iotum.callbridge.rocks",e=new c.Dashboard({domain:a,container:o.current},c.Service.Team,{layout:c.LayoutOption.main,pathname:t.path});return console.log("A new chat room was opened: "+t.path),function(){e.unload(),console.log("Chat room was closed: "+t.path)}}),[t.path,n]),(0,r.jsx)("div",{ref:o,className:i.Z.chatRoom})}},1374:function(t,o,n){n.d(o,{Z:function(){return s}});n(2791);var a=n(7689),e="MenuButton_menuButton__e9oFw",c="MenuButton_left__d8Tih",i="MenuButton_right__fbjxn",r=n(184);var s=function(t){var o=t.position,n=void 0===o?"left":o,s=(0,a.s0)(),u="right"===n?i:c;return(0,r.jsx)("div",{children:(0,r.jsx)("button",{className:"".concat(e," ").concat(u),onClick:function(){console.log("Menu Button Clicked, Go To the Menu Page."),s("/iotum-samples/menu")},children:"Menu Page"})})}},5528:function(t,o,n){n.r(o),n.d(o,{default:function(){return v}});var a=n(1413),e=n(9439),c=n(2791),i=n(9434),r=n(1891),s=n(27),u=n(5177),l=n(1374),h=n(184),m=function(t){var o=t.rooms,n=t.onRoomClose;return(0,h.jsxs)("div",{className:s.Z.chatRoomsContainer,children:[o.map((function(t){return t.bool&&(0,h.jsxs)("div",{className:"".concat(s.Z.chatRoom," ").concat(s.Z.activeRoom),children:[(0,h.jsx)(r.Z,{path:t.path}),(0,h.jsx)("button",{className:s.Z.closeButton,onClick:function(){return n(t.path)},children:"x"})]},t.path)})),(0,h.jsx)(u.Z,{position:"right"}),(0,h.jsx)(l.Z,{position:"right"})]})},d="submitForm_container__iv0mm",f="submitForm_roomListContainer__8I4zt",_=n(9074),p=n(1348),v=function(){(0,p.Z)();var t=(0,c.useState)([]),o=(0,e.Z)(t,2),n=o[0],r=o[1],s=(0,i.v9)((function(t){return t.credentials})),u=(0,c.useCallback)((function(t){var o=t.domain,n=t.token,e=t.hostId;console.log("renderWidget ran");var c=new _.Dashboard({domain:o,sso:{token:n,hostId:e},container:"#chat"},_.Service.Team,{layout:_.LayoutOption.list,pathname:"/"});return c.once("dashboard.ROOM_LIST",(function(t){var o=[],n=Object.values(t.rooms).map((function(t){var n=t.accounts.map((function(t){return t.name}));if(1===n.length){var a="".concat(n[0]," (you)");return o.push(n[0]),{name:a,path:t.path,bool:!1}}return{name:n.filter((function(t){return!o.includes(t)})).join(", "),path:t.path,bool:!1}}));r(n)})),c.on("dashboard.NAVIGATE",(function(t){var o;"/"!==t.pathname&&(c.load("Team",{layout:"list"}),console.log("There was a navigate event to "+t.pathname+" in the list widget and the list widget was reloaded")),o=t.pathname,r((function(t){return t.map((function(t){return t.path===o?(0,a.Z)((0,a.Z)({},t),{},{bool:!0}):t}))}))})),c.on("dashboard.READY",(function(){console.log("The list widget was rendered")})),c}),[]);return(0,c.useEffect)((function(){if(s&&s.token&&s.domain&&s.hostId){var t=u(s);return function(){t.unload()}}}),[s,u]),(0,h.jsxs)("div",{className:d,children:[(0,h.jsx)("div",{id:"chat",className:f}),(0,h.jsx)("div",{children:(0,h.jsx)(m,{rooms:n,onRoomClose:function(t){console.log(t+" was closed"),r((function(o){return o.map((function(o){return o.path===t?(0,a.Z)((0,a.Z)({},o),{},{bool:!1}):o}))}))}})})]})}},27:function(t,o){o.Z={container:"chat_container__tPqzb",roomListContainer:"chat_roomListContainer__hpRp3",chatRoomItem:"chat_chatRoomItem__tdDrk",active:"chat_active__YaH2-",chatRoomsContainer:"chat_chatRoomsContainer__Smrg+",chatRoom:"chat_chatRoom__Oon7U",activeRoom:"chat_activeRoom__fmDik",closeButton:"chat_closeButton__v7qtp"}}}]);
//# sourceMappingURL=528.bdcd2101.chunk.js.map