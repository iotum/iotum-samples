{"version":3,"file":"static/js/210.5041c705.chunk.js","mappings":"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","sources":["components/ChatRoom/ChatRoom.js","webpack://iotum-samples/./src/navigation/MenuButton/MenuButton.module.css?3f77","navigation/MenuButton/MenuButton.js","pages/list-widget-ui/ChatRoomList.js","pages/list-widget-ui/App.js","webpack://iotum-samples/./src/components/ChatRoom/chat.module.css?03db"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport * as Callbridge from '@iotum/callbridge-js';\nimport styles from './chat.module.css';\n\nconst ChatRoom = (props) => {\n  const chatContainerRef = useRef(null); \n  const credentials = useSelector(state => state.credentials)\n\n  useEffect(() => {\n    // Use the domain from the Redux store, or a default value if not available\n    const domain = credentials.domain || 'iotum.callbridge.rocks'\n\n    // This code will run after the component has rendered and the chat container is available in the DOM\n    const chatRoom = new Callbridge.Dashboard(\n      {\n        domain: domain,\n        container: chatContainerRef.current, // Use the DOM element reference\n      },\n      'Team',\n      { layout: 'main', pathname: props.path }\n    );\n\n    console.log(\"A new chat room was opened: \" + props.path);\n\n    // Cleanup function to be called when the component unmounts\n    return () => {\n      chatRoom.unload(); // Replace with actual cleanup method if available\n      console.log(\"Chat room was closed: \" + props.path);\n    };\n  }, [props.path, credentials]); \n\n  // Render the chat container reference\n  return <div ref={chatContainerRef} className={styles.chatRoom}></div>;\n};\n\nexport default ChatRoom;\n","// extracted by mini-css-extract-plugin\nexport default {\"menuButton\":\"MenuButton_menuButton__e9oFw\",\"left\":\"MenuButton_left__d8Tih\",\"right\":\"MenuButton_right__fbjxn\"};","import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport styles from './MenuButton.module.css'; \r\n\r\nfunction MenuButton({ position = 'left' }) { // 'left' is default if no position is provided\r\n  const navigate = useNavigate();\r\n  \r\n  const handleClick = () => {\r\n    console.log('Menu Button Clicked, Go To the Menu Page.');\r\n    navigate('/menu');\r\n  };\r\n\r\n  // Determine the button position class\r\n  const positionClass = position === 'right' ? styles.right : styles.left;\r\n\r\n  return (\r\n    <div>\r\n      <button className={`${styles.menuButton} ${positionClass}`} onClick={handleClick}>\r\n        Menu Page\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MenuButton;\r\n","import React from 'react';\nimport ChatRoom from '../../components/ChatRoom/ChatRoom.js';\nimport styles from '../../components/ChatRoom/chat.module.css';\nimport TokenButton from '../../navigation/TokenButton/TokenButton';\nimport MenuButton from '../../navigation/MenuButton/MenuButton';\n\nconst ChatRoomList = ({ rooms, onRoomButtonClick, onRoomClose }) => {\n  return (\n    <div className={styles.container}>\n      <div className={styles.roomListContainer}>\n        {rooms.map((room) => (\n          <div key={room.path} className={styles.chatRoomItem}>\n            <button\n              onClick={() => onRoomButtonClick(room.path)}\n              className={room.bool ? styles.active : ''}\n            >\n              {room.name}\n            </button>\n          </div>\n        ))}\n      </div>\n      <div className={styles.chatRoomsContainer}>\n        {rooms.map((room) =>\n          room.bool && (\n            <div key={room.path} className={`${styles.chatRoom} ${styles.activeRoom}`}>\n              <ChatRoom path={room.path} />\n              <button\n                className={styles.closeButton}\n                onClick={() => onRoomClose(room.path)}\n              >\n                x\n              </button>\n            </div>\n          )\n        )}\n        <TokenButton position='right'/>\n        <MenuButton position=\"right\"/>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatRoomList;","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport ChatRoomList from './ChatRoomList';\nimport * as Callbridge from '@iotum/callbridge-js';\nimport useGuardedRoute from '../../components/hooks/useGuardedRoute';\n\nconst App = () => {\n  useGuardedRoute()\n  const [allRooms, setAllRooms] = useState([]);\n  const widget = useRef(null);\n\n  // Retrieve credentials from Redux store\n  const credentials = useSelector(state => state.credentials);\n\n  const handleRoomButtonClick = (path) => {\n    setAllRooms(prevRooms => prevRooms.map(room => {\n      return room.path === path ? { ...room, bool: true } : room;\n    }));\n  };\n\n  const handleRoomClose = (path) => {\n    setAllRooms(prevRooms => prevRooms.map(room => {\n      return room.path === path ? { ...room, bool: false } : room;\n    }));\n  };\n\n  // Define the renderWidget function with useCallback\n  const renderWidget = useCallback(() => {\n    widget.current = new Callbridge.Dashboard(\n      {\n        domain: credentials.domain,\n        sso: {\n          token: credentials.token,\n          hostId: credentials.hostId\n        },\n        container: '#chat',\n      },\n      'Team',\n      { layout: 'list', pathname: '/'}\n    );\n\n    widget.current.once('dashboard.ROOM_LIST', (data) => {\n      const uniqueAccountNames = [];\n      const allRoomsChange = Object.values(data.rooms).map((room) => {\n        const accounts = room.accounts.map((account) => account.name);\n        \n        if (accounts.length === 1) {\n          const accountName = `${accounts[0]} (you)`;\n          uniqueAccountNames.push(accounts[0]);\n          return {\n            name: accountName,\n            path: room.path,\n            bool: false,\n          };\n        }\n\n        const filteredNames = accounts.filter((name) => !uniqueAccountNames.includes(name));\n        return {\n          name: filteredNames.join(', '),\n          path: room.path,\n          bool: false,\n        };\n      });\n\n      setAllRooms(allRoomsChange);\n    });\n\n    widget.current.toggle(false);\n  }, [credentials]); \n\n  useEffect(() => {\n    if (credentials && credentials.token && credentials.domain && credentials.hostId) {\n      const timer = setTimeout(() => {\n        renderWidget();\n      }, 100); // Delay the widget initialization to ensure the DOM element is available\n  \n      return () => {\n        clearTimeout(timer);\n        widget.current?.unload();\n      };\n    }\n  }, [credentials, renderWidget]); // useEffect dependencies\n\n  return (\n    <div>\n      <div id=\"room-buttons\">\n        <ChatRoomList\n          rooms={allRooms}\n          onRoomButtonClick={handleRoomButtonClick}\n          onRoomClose={handleRoomClose}\n        />\n      </div>\n      <div id=\"chat\"></div>\n    </div>\n  );\n};\n\nexport default App;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"chat_container__tPqzb\",\"roomListContainer\":\"chat_roomListContainer__hpRp3\",\"chatRoomItem\":\"chat_chatRoomItem__tdDrk\",\"active\":\"chat_active__YaH2-\",\"chatRoomsContainer\":\"chat_chatRoomsContainer__Smrg+\",\"chatRoom\":\"chat_chatRoom__Oon7U\",\"activeRoom\":\"chat_activeRoom__fmDik\",\"closeButton\":\"chat_closeButton__v7qtp\"};"],"names":["props","chatContainerRef","useRef","credentials","useSelector","state","useEffect","domain","chatRoom","Callbridge","container","current","layout","pathname","path","console","log","unload","_jsx","ref","className","styles","_ref","_ref$position","position","navigate","useNavigate","positionClass","children","concat","onClick","rooms","onRoomButtonClick","onRoomClose","_jsxs","roomListContainer","map","room","chatRoomItem","bool","active","name","chatRoomsContainer","activeRoom","ChatRoom","closeButton","TokenButton","MenuButton","useGuardedRoute","_useState","useState","_useState2","_slicedToArray","allRooms","setAllRooms","widget","renderWidget","useCallback","sso","token","hostId","once","data","uniqueAccountNames","allRoomsChange","Object","values","accounts","account","length","accountName","push","filter","includes","join","toggle","timer","setTimeout","_widget$current","clearTimeout","id","ChatRoomList","prevRooms","_objectSpread"],"sourceRoot":""}