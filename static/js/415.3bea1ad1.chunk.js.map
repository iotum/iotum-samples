{"version":3,"file":"static/js/415.3bea1ad1.chunk.js","mappings":"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","sources":["webpack://iotum-samples/./src/navigation/MenuButton/MenuButton.module.css?3f77","navigation/MenuButton/MenuButton.js","webpack://iotum-samples/./src/pages/meeting-devices/submitForm.module.css?c765","pages/meeting-devices/App.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"menuButton\":\"MenuButton_menuButton__e9oFw\",\"left\":\"MenuButton_left__d8Tih\",\"right\":\"MenuButton_right__fbjxn\"};","import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport styles from './MenuButton.module.css'; \r\n\r\nfunction MenuButton({ position = 'left' }) { // 'left' is default if no position is provided\r\n  const navigate = useNavigate();\r\n  \r\n  const handleClick = () => {\r\n    console.log('Menu Button Clicked, Go To the Menu Page.');\r\n    navigate('/iotum-samples/menu');\r\n  };\r\n\r\n  // Determine the button position class\r\n  const positionClass = position === 'right' ? styles.right : styles.left;\r\n\r\n  return (\r\n    <div>\r\n      <button className={`${styles.menuButton} ${positionClass}`} onClick={handleClick}>\r\n        Menu Page\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MenuButton;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"submitForm_form__flsJs\",\"appContainer\":\"submitForm_appContainer__y2gcQ\",\"accessCodeInput\":\"submitForm_accessCodeInput__KLpEG\",\"startMeetingButton\":\"submitForm_startMeetingButton__Tsr3j\",\"widgetContainer\":\"submitForm_widgetContainer__k+945\",\"devices\":\"submitForm_devices__YzHDj\"};","import React, { useRef, useEffect, useState } from 'react';\nimport styles from './submitForm.module.css';\nimport TokenButton from '../../navigation/TokenButton/TokenButton';\nimport MenuButton from '../../navigation/MenuButton/MenuButton';\nimport * as Callbridge from '@iotum/callbridge-js';\nimport { useSelector } from 'react-redux';\nimport useGuardedRoute from '../../components/hooks/useGuardedRoute';\n\nconst renderWidget = ({ domain, token, hostId, accessCode, muteMic, muteCam }) => {\n  const _widget = new Callbridge.Meeting(\n    {\n      domain,\n      sso: {\n        token,\n        hostId\n      },\n      container: '#meeting',\n    },\n    accessCode,\n    {\n      skipJoin: true,\n      mute: {\n        mic: muteMic,\n        camera: muteCam,\n      }\n    }\n  );\n\n  document.querySelector('#start').disabled = true;\n  _widget.on('room.READY', () => {\n    document.querySelector('#start').disabled = false;\n  });\n\n  _widget.on('device.DEVICE_LIST_CHANGED', (devices) => {\n    ['audioinput', 'audiooutput', 'videoinput'].forEach((kind) => {\n      /** @type {HTMLSelectElement} */\n      const select = document.querySelector(`select#${kind}`);\n      select.replaceChildren(select.firstChild);\n\n      devices[kind].forEach(({ label, deviceId }) => {\n        select.appendChild(\n          Object.assign(\n            document.createElement('option'),\n            {\n              textContent: label,\n              value: deviceId,\n            }\n          )\n        )\n      });\n    })\n  });\n\n  _widget.on('device.DEVICE_IN_USE', ({ kind, deviceId }) => {\n    /** @type {HTMLSelectElement} */\n    const select = document.querySelector(`select#${kind}`);\n    select.value = deviceId;\n  });\n\n  return _widget;\n};\n\nconst App = () => {\n  useGuardedRoute();\n\n  const [isCameraOn, setCameraOn] = useState(/** @return {boolean} */() => { });\n  const [isMuted, setMuted] = useState(/** @return {boolean} */() => { });\n\n  /** @type {React.MutableRefObject<Callbridge.Meeting>} */\n  const widget = useRef();\n\n  const credentials = useSelector(state => state.credentials);\n\n  /** @type {React.ChangeEventHandler<HTMLSelectElement>} */\n  const onDeviceChange = ({ target: select }) => {\n    switch (select.id) {\n      case 'videoinput':\n        widget.current.setVideoInput(select.value);\n        break;\n      case 'audioinput':\n        widget.current.setAudioInput(select.value);\n        break;\n      case 'audiooutput':\n        widget.current.setAudioOutput(select.value);\n        break;\n      default:\n        console.error('invalid', select.id);\n        break;\n    }\n  };\n\n  const onToggleMic = () => {\n    widget.current.setMute(!isMuted);\n  };\n  const onToggleCam = () => {\n    widget.current.setCamera(!isCameraOn);\n  };\n\n  /** @type {React.FormEventHandler<HTMLFormElement>} */\n  const onSubmit = (evt) => {\n    // Prevent the browser from reloading the page\n    evt.preventDefault();\n\n    // Read the form data\n    const accessCode = evt.target['accessCode'].value;\n    if (!accessCode) {\n      console.log(\"Access code not set, widget will not be rendered.\");\n      return;\n    }\n\n    widget.current?.unload();\n    widget.current = renderWidget({\n      ...credentials,\n      accessCode,\n      muteMic: !evt.target['joinMic'].checked,\n      muteCam: !evt.target['joinCam'].checked,\n    });\n\n    widget.current.on('participant.CHANGE', ({ isCameraOn, isMuted }) => {\n      setCameraOn(isCameraOn);\n      setMuted(isMuted);\n    });\n  };\n\n  useEffect(() => {\n    return () => {\n      widget.current?.unload();\n    }\n  }, []);\n\n  return (\n    <div className={styles.appContainer}>\n      <form className={styles.form} onSubmit={onSubmit}>\n        <label><span>Access Code:</span>\n          <input\n            name=\"accessCode\"\n            type=\"text\"\n            required\n            autoFocus\n            className={styles.accessCodeInput}\n          />\n        </label>\n        <label title='join with microphone on'>\n          <input name=\"joinMic\" type=\"checkbox\" defaultChecked={true} />\n          <span>mic</span>\n        </label>\n        <label title='join with camera on'>\n          <input name=\"joinCam\" type=\"checkbox\" defaultChecked={true} />\n          <span>cam</span>\n        </label>\n        <button id=\"start\" type=\"submit\" className={styles.startMeetingButton}>Start Meeting</button>\n      </form>\n      <TokenButton position='right' />\n      <MenuButton position=\"right\" />\n      <div className={styles.devices}>\n        <select id=\"audioinput\" onChange={onDeviceChange}><option disabled value=\"\">audio input ...</option></select>\n        <select id=\"audiooutput\" onChange={onDeviceChange}><option disabled value=\"\">audio output ...</option></select>\n        <select id=\"videoinput\" onChange={onDeviceChange}><option disabled value=\"\">video input ...</option></select>\n        {isMuted !== undefined && <button id=\"toggleMic\" type=\"button\" onClick={onToggleMic}>{isMuted ? 'UNMUTE' : 'MUTE'} mic</button>}\n        {isCameraOn !== undefined && <button id=\"toggleCam\" type=\"button\" onClick={onToggleCam}>{isCameraOn ? 'START' : 'STOP'} cam</button>}\n      </div>\n      <div id=\"meeting\" className={styles.widgetContainer}></div>\n    </div>\n  );\n};\n\nexport default App;"],"names":["_ref","_ref$position","position","navigate","useNavigate","positionClass","styles","_jsx","children","className","concat","onClick","console","log","useGuardedRoute","_useState","useState","_useState2","_slicedToArray","isCameraOn","setCameraOn","_useState3","_useState4","isMuted","setMuted","widget","useRef","credentials","useSelector","state","onDeviceChange","_ref4","select","target","id","current","setVideoInput","value","setAudioInput","setAudioOutput","error","useEffect","_widget$current2","unload","_jsxs","onSubmit","evt","_widget$current","preventDefault","accessCode","domain","token","hostId","muteMic","muteCam","_widget","Callbridge","sso","container","skipJoin","mute","mic","camera","document","querySelector","disabled","on","devices","forEach","kind","replaceChildren","firstChild","_ref2","label","deviceId","appendChild","Object","assign","createElement","textContent","_ref3","renderWidget","_objectSpread","checked","_ref5","name","type","required","autoFocus","title","defaultChecked","TokenButton","MenuButton","onChange","undefined","setMute","setCamera"],"sourceRoot":""}