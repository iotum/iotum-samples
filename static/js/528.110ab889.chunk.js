"use strict";(self.webpackChunkiotum_samples=self.webpackChunkiotum_samples||[]).push([[528],{1891:function(n,o,t){var e=t(2791),a=t(9074),r=t(27),c=t(184);o.Z=function(n){var o=(0,e.useRef)(null);return(0,e.useEffect)((function(){var t=new a.Dashboard({domain:"iotum.callbridge.rocks",container:o.current},"Team",{layout:"main",pathname:n.path});return console.log("A new chat room was opened: "+n.path),function(){t.unload(),console.log("Chat room was closed: "+n.path)}}),[n.path]),(0,c.jsx)("div",{ref:o,className:r.Z.chatRoom})}},1374:function(n,o,t){t.d(o,{Z:function(){return s}});t(2791);var e=t(7689),a="MenuButton_menuButton__e9oFw",r="MenuButton_left__d8Tih",c="MenuButton_right__fbjxn",i=t(184);var s=function(n){var o=n.position,t=void 0===o?"left":o,s=(0,e.s0)(),u="right"===t?c:r;return(0,i.jsx)("div",{children:(0,i.jsx)("button",{className:"".concat(a," ").concat(u),onClick:function(){console.log("Menu Button Clicked, Go To the Menu Page."),s("/iotum-samples/menu")},children:"Menu Page"})})}},5528:function(n,o,t){t.r(o),t.d(o,{App:function(){return p},default:function(){return v}});var e=t(1413),a=t(9439),r=t(2791),c=t(9434),i=t(1891),s=t(27),u=t(5177),l=t(1374),h=t(184),m=function(n){var o=n.rooms,t=n.onRoomClose;return(0,h.jsxs)("div",{className:s.Z.chatRoomsContainer,children:[o.map((function(n){return n.bool&&(0,h.jsxs)("div",{className:"".concat(s.Z.chatRoom," ").concat(s.Z.activeRoom),children:[(0,h.jsx)(i.Z,{path:n.path}),(0,h.jsx)("button",{className:s.Z.closeButton,onClick:function(){return t(n.path)},children:"x"})]},n.path)})),(0,h.jsx)(u.Z,{position:"right"}),(0,h.jsx)(l.Z,{position:"right"})]})},d="submitForm_container__iv0mm",f="submitForm_roomListContainer__8I4zt",_=t(9074),p=function(){var n=(0,r.useState)([]),o=(0,a.Z)(n,2),t=o[0],i=o[1],s=(0,r.useRef)(null),u=(0,c.v9)((function(n){return n.credentials}));console.log("Credentials:",u);var l=(0,r.useCallback)((function(){console.log("renderWidget ran"),s.current=new _.Dashboard({domain:u.domain,sso:{token:u.token,hostId:u.hostId},container:"#chat"},"Team",{layout:"list",pathname:"/"}),console.log("dashboard rendered"),s.current.once("dashboard.ROOM_LIST",(function(n){var o=[],t=Object.values(n.rooms).map((function(n){var t=n.accounts.map((function(n){return n.name}));if(1===t.length){var e="".concat(t[0]," (you)");return o.push(t[0]),{name:e,path:n.path,bool:!1}}return{name:t.filter((function(n){return!o.includes(n)})).join(", "),path:n.path,bool:!1}}));i(t)})),s.current.on("dashboard.NAVIGATE",(function(n){var o;"/"!==n.pathname&&(s.current.load("Team",{layout:"list"}),console.log("There was a navigate event to "+n.pathname+" in the list widget and the list widget was reloaded")),o=n.pathname,i((function(n){return n.map((function(n){return n.path===o?(0,e.Z)((0,e.Z)({},n),{},{bool:!0}):n}))}))})),s.current.on("dashboard.READY",(function(){console.log("The list widget was rendered")}))}),[u]);return(0,r.useEffect)((function(){return u&&u.token&&u.domain&&u.hostId&&l(u),function(){var n;null===(n=s.current)||void 0===n||n.unload()}}),[u,l]),(0,h.jsxs)("div",{className:d,children:[(0,h.jsx)("div",{id:"chat",className:f}),(0,h.jsx)("div",{children:(0,h.jsx)(m,{rooms:t,onRoomClose:function(n){console.log(n+" was closed"),i((function(o){return o.map((function(o){return o.path===n?(0,e.Z)((0,e.Z)({},o),{},{bool:!1}):o}))}))}})})]})},v=p},27:function(n,o){o.Z={container:"chat_container__tPqzb",roomListContainer:"chat_roomListContainer__hpRp3",chatRoomItem:"chat_chatRoomItem__tdDrk",active:"chat_active__YaH2-",chatRoomsContainer:"chat_chatRoomsContainer__Smrg+",chatRoom:"chat_chatRoom__Oon7U",activeRoom:"chat_activeRoom__fmDik",closeButton:"chat_closeButton__v7qtp"}}}]);
//# sourceMappingURL=528.110ab889.chunk.js.map