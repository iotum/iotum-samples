{"version":3,"file":"static/js/197.5f57680b.chunk.js","mappings":"yKACA,EAA6B,+BAA7B,EAAmE,yBAAnE,EAAoG,0B,SCuBpG,MApBA,SAAmBA,GAAyB,IAADC,EAAAD,EAArBE,SAAAA,OAAQ,IAAAD,EAAG,OAAMA,EAC/BE,GAAWC,EAAAA,EAAAA,MAQXC,EAA6B,UAAbH,EAAuBI,EAAeA,EAE5D,OACEC,EAAAA,EAAAA,KAAA,OAAAC,UACED,EAAAA,EAAAA,KAAA,UAAQE,UAAS,GAAAC,OAAKJ,EAAiB,KAAAI,OAAIL,GAAiBM,QAV5C,WAClBC,QAAQC,IAAI,6CACZV,EAAS,sBACX,EAOqFK,SAAC,eAKxF,C,4FCrBA,EAA+B,iCAA/B,EAAuF,yCAAvF,EAAkJ,oCAAlJ,EAA8L,0B,2DCsI9L,EA/HY,YACVM,EAAAA,EAAAA,KACA,IAAAC,GAAgDC,EAAAA,EAAAA,WAAS,GAAKC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAvDI,EAAgBF,EAAA,GAAEG,EAAmBH,EAAA,GAC5CI,GAA4CL,EAAAA,EAAAA,UAAS,GAAEM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAhDE,EAAcD,EAAA,GAAEE,EAAiBF,EAAA,GACxCG,GAAsDT,EAAAA,EAAAA,WAAS,GAAMU,GAAAR,EAAAA,EAAAA,GAAAO,EAAA,GAA9DE,EAAmBD,EAAA,GAAEE,EAAsBF,EAAA,GAClDG,GAA8Cb,EAAAA,EAAAA,WAAS,GAAMc,GAAAZ,EAAAA,EAAAA,GAAAW,EAAA,GAAtDE,EAAeD,EAAA,GAAEE,EAAkBF,EAAA,GAEpCG,GAAeC,EAAAA,EAAAA,QAAO,MACtBC,GAAgBD,EAAAA,EAAAA,QAAO,MACvBE,GAAYF,EAAAA,EAAAA,QAAO,MAEnBG,GAAcC,EAAAA,EAAAA,KAAY,SAAAC,GAAK,OAAIA,EAAMF,WAAW,IAGpDG,EAAsBH,EAAYI,OAASJ,EAAYK,QAAUL,EAAYM,OAE7EC,EAAgB,WAChBR,EAAUS,SACZT,EAAUS,QAAQC,QAAO,GAEvBX,EAAcU,SAChBV,EAAcU,QAAQC,QAAO,EAEjC,EAEMC,GAAeC,EAAAA,EAAAA,cAAY,WAC3BR,IACFJ,EAAUS,QAAU,IAAII,EAAAA,UAAqB,CAC3CP,OAAQL,EAAYK,OACpBQ,IAAK,CACHT,MAAOJ,EAAYI,MACnBE,OAAQN,EAAYM,QAEtBQ,UAAWlB,EAAaY,UAG1BT,EAAUS,QAAQC,QAAO,GAEzBV,EAAUS,QAAQO,GAAG,mBAAmB,WACtCjB,EAAcU,QAAU,IAAII,EAAAA,UAAqB,CAC/CP,OAAQL,EAAYK,OACpBS,UAAWlB,EAAaY,SACvB,QAEHV,EAAcU,QAAQC,QAAO,GAE7BX,EAAcU,QAAQO,GAAG,6BAA6B,SAACC,GACrD,IAAMC,EAAcC,OAAOC,OAAOH,EAAKI,OAAOC,QAAO,SAACC,EAAOC,GAAK,OAAKD,EAAQC,CAAK,GAAE,GACtFpC,EAAkB8B,EACpB,IAEAnB,EAAcU,QAAQO,GAAG,mBAAmB,WAC1CpB,GAAmB,GACnBJ,GAAuB,EACzB,GACF,IAEJ,GAAG,CAACS,EAAaG,KAEjBqB,EAAAA,EAAAA,YAAU,WAKR,OAJIrB,GACFO,IAGK,WACLH,IACAhC,QAAQC,IAAI,kBACd,CACF,GAAG,CAACwB,EAAaU,EAAcP,KAE/BqB,EAAAA,EAAAA,YAAU,WACJlC,GACFQ,EAAcU,QAAQO,GAAG,sBAAsB,SAACC,GAC9C,IAAMS,EAAyB,MAAlBT,EAAKU,SAAmBV,EAAKU,SAAW,sBACrDnD,QAAQC,IAAI,2CAADH,OAA4CoD,GACzD,GAEJ,GAAG,CAACnC,IAEJ,IAAMqC,EAAa,SAACC,GAClBrB,IAEgB,KAAZqB,GACF7C,GAAoB,GACpBR,QAAQC,IAAI,kBACS,SAAZoD,GACT9B,EAAcU,QAAQC,QAAO,GAC7B1B,GAAoB,GACpBR,QAAQC,IAAI,+BAEZuB,EAAUS,QAAQC,QAAO,GACzBV,EAAUS,QAAQqB,KAAKD,GACvB7C,GAAoB,GACpBR,QAAQC,IAAI,YAADH,OAAauD,EAAO,YAEnC,EAEA,OACEE,EAAAA,EAAAA,MAAA,OAAK1D,UAAWH,EAAoBE,SAAA,EAClC2D,EAAAA,EAAAA,MAAA,OAAK1D,UAAWH,EAA4BE,SAAA,EAC1CD,EAAAA,EAAAA,KAAA,UAAQI,QAAS,kBAAMqD,EAAW,GAAG,EAAEI,UAAWrC,EAAgBvB,SAAC,cAGnE2D,EAAAA,EAAAA,MAAA,UACExD,QAAS,kBAAMqD,EAAW,OAAO,EACjCI,UAAWrC,EACXsC,MAAO,CAAEnE,SAAU,YAAaM,SAAA,CACjC,YAEEe,EAAiB,IAAKhB,EAAAA,EAAAA,KAAA,QAAME,UAAWH,EAAaE,SAAEe,QAEzDhB,EAAAA,EAAAA,KAAA,UAAQI,QAAS,kBAAMqD,EAAW,QAAQ,EAAEI,UAAWrC,EAAgBvB,SAAC,WAGxED,EAAAA,EAAAA,KAAA,UAAQI,QAAS,kBAAMqD,EAAW,WAAW,EAAEI,UAAWrC,EAAgBvB,SAAC,gBAI5EW,IAAoBZ,EAAAA,EAAAA,KAAA,OAAAC,SAAK,wBACxBuB,IAAmBxB,EAAAA,EAAAA,KAAA,OAAAC,SAAK,6BAC1BD,EAAAA,EAAAA,KAAA,OAAK+D,IAAKrC,EAAcxB,UAAWH,KACnCC,EAAAA,EAAAA,KAACgE,EAAAA,EAAW,CAACrE,SAAS,WACtBK,EAAAA,EAAAA,KAACiE,EAAAA,EAAU,CAACtE,SAAS,YAG3B,C","sources":["webpack://iotum-samples/./src/navigation/MenuButton/MenuButton.module.css?3f77","navigation/MenuButton/MenuButton.js","webpack://iotum-samples/./src/pages/tabbed-dashboard/submitForm.module.css?8a8c","pages/tabbed-dashboard/App.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"menuButton\":\"MenuButton_menuButton__e9oFw\",\"left\":\"MenuButton_left__d8Tih\",\"right\":\"MenuButton_right__fbjxn\"};","import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport styles from './MenuButton.module.css'; \r\n\r\nfunction MenuButton({ position = 'left' }) { // 'left' is default if no position is provided\r\n  const navigate = useNavigate();\r\n  \r\n  const handleClick = () => {\r\n    console.log('Menu Button Clicked, Go To the Menu Page.');\r\n    navigate('/iotum-samples/menu');\r\n  };\r\n\r\n  // Determine the button position class\r\n  const positionClass = position === 'right' ? styles.right : styles.left;\r\n\r\n  return (\r\n    <div>\r\n      <button className={`${styles.menuButton} ${positionClass}`} onClick={handleClick}>\r\n        Menu Page\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MenuButton;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"appContainer\":\"submitForm_appContainer__B1dgt\",\"verticalTabContainer\":\"submitForm_verticalTabContainer__riwi2\",\"widgetContainer\":\"submitForm_widgetContainer__Vm7kt\",\"badge\":\"submitForm_badge__llHLA\"};","import React, { useState, useRef, useCallback, useEffect } from 'react';\nimport styles from './submitForm.module.css';\nimport TokenButton from '../../navigation/TokenButton/TokenButton';\nimport MenuButton from '../../navigation/MenuButton/MenuButton';\nimport * as Callbridge from '@iotum/callbridge-js';\nimport { useSelector } from 'react-redux';\nimport useGuardedRoute from '../../components/hooks/useGuardedRoute';\n\nconst App = () => {\n  useGuardedRoute(); // Guard the route\n  const [isYourAppVisible, setIsYourAppVisible] = useState(true);\n  const [unreadMessages, setUnreadMessages] = useState(0);\n  const [isWidgetInitialized, setIsWidgetInitialized] = useState(false);\n  const [chatWidgetReady, setChatWidgetReady] = useState(false);\n\n  const containerRef = useRef(null);\n  const chatWidgetRef = useRef(null);\n  const widgetRef = useRef(null);\n\n  const credentials = useSelector(state => state.credentials);\n\n  // Check if all necessary credentials are available\n  const areCredentialsValid = credentials.token && credentials.domain && credentials.hostId;\n\n  const unloadWidgets = () => {\n    if (widgetRef.current) {\n      widgetRef.current.toggle(false);\n    }\n    if (chatWidgetRef.current) {\n      chatWidgetRef.current.toggle(false);\n    }\n  };\n\n  const renderWidget = useCallback(() => {\n    if (areCredentialsValid) {\n      widgetRef.current = new Callbridge.Dashboard({\n        domain: credentials.domain,\n        sso: {\n          token: credentials.token,\n          hostId: credentials.hostId,\n        },\n        container: containerRef.current,\n      });\n\n      widgetRef.current.toggle(false);\n\n      widgetRef.current.on('dashboard.READY', () => {\n        chatWidgetRef.current = new Callbridge.Dashboard({\n          domain: credentials.domain,\n          container: containerRef.current,\n        }, \"Team\");\n\n        chatWidgetRef.current.toggle(false);\n\n        chatWidgetRef.current.on('dashboard.UNREAD_MESSAGES', (data) => {\n          const totalUnread = Object.values(data.rooms).reduce((total, count) => total + count, 0);\n          setUnreadMessages(totalUnread);\n        });\n\n        chatWidgetRef.current.on('dashboard.READY', () => {\n          setChatWidgetReady(true);\n          setIsWidgetInitialized(true);\n        });\n      });\n    }\n  }, [credentials, areCredentialsValid]);\n\n  useEffect(() => {\n    if (areCredentialsValid) {\n      renderWidget();\n    }\n\n    return () => {\n      unloadWidgets();\n      console.log('Widget unloaded');\n    };\n  }, [credentials, renderWidget, areCredentialsValid]);\n\n  useEffect(() => {\n    if (isWidgetInitialized) {\n      chatWidgetRef.current.on('dashboard.NAVIGATE', (data) => {\n        const room = data.pathname !== '/' ? data.pathname : \"an unspecified room\";\n        console.log(`The chat widget navigated to this room: ${room}`);\n      });\n    }\n  }, [isWidgetInitialized]);\n\n  const loadWidget = (service) => {\n    unloadWidgets(); // Unload any currently displayed widgets\n\n    if (service === \"\") {\n      setIsYourAppVisible(true);\n      console.log(\"Load your app\");\n    } else if (service === \"Team\") {\n      chatWidgetRef.current.toggle(true);\n      setIsYourAppVisible(false);\n      console.log(\"Load the team chat widget\");\n    } else {\n      widgetRef.current.toggle(true);\n      widgetRef.current.load(service);\n      setIsYourAppVisible(false);\n      console.log(`Load the ${service} widget`);\n    }\n  }\n\n  return (\n    <div className={styles.appContainer}>\n      <div className={styles.verticalTabContainer}>\n        <button onClick={() => loadWidget('')} disabled={!chatWidgetReady}>\n          Your App\n        </button>\n        <button\n          onClick={() => loadWidget('Team')}\n          disabled={!chatWidgetReady}\n          style={{ position: 'relative' }}\n        >\n          Team Chat\n          {unreadMessages > 0 && <span className={styles.badge}>{unreadMessages}</span>}\n        </button>\n        <button onClick={() => loadWidget('Drive')} disabled={!chatWidgetReady}>\n          Drive\n        </button>\n        <button onClick={() => loadWidget('Contacts')} disabled={!chatWidgetReady}>\n          Contacts\n        </button>\n      </div>\n      {isYourAppVisible && <div>Your app goes here</div>}\n      {!chatWidgetReady && <div>The widgets are loading</div>}\n      <div ref={containerRef} className={styles.widgetContainer}></div>\n      <TokenButton position='right' />\n      <MenuButton position=\"right\" />\n    </div>\n  );\n}\n\nexport default App;\n"],"names":["_ref","_ref$position","position","navigate","useNavigate","positionClass","styles","_jsx","children","className","concat","onClick","console","log","useGuardedRoute","_useState","useState","_useState2","_slicedToArray","isYourAppVisible","setIsYourAppVisible","_useState3","_useState4","unreadMessages","setUnreadMessages","_useState5","_useState6","isWidgetInitialized","setIsWidgetInitialized","_useState7","_useState8","chatWidgetReady","setChatWidgetReady","containerRef","useRef","chatWidgetRef","widgetRef","credentials","useSelector","state","areCredentialsValid","token","domain","hostId","unloadWidgets","current","toggle","renderWidget","useCallback","Callbridge","sso","container","on","data","totalUnread","Object","values","rooms","reduce","total","count","useEffect","room","pathname","loadWidget","service","load","_jsxs","disabled","style","ref","TokenButton","MenuButton"],"sourceRoot":""}