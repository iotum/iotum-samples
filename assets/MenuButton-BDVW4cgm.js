import{c as I,j as b}from"./index-CRP2gdnx.js";var y={exports:{}},l=typeof Reflect=="object"?Reflect:null,L=l&&typeof l.apply=="function"?l.apply:function(t,n,i){return Function.prototype.apply.call(t,n,i)},_;l&&typeof l.ownKeys=="function"?_=l.ownKeys:Object.getOwnPropertySymbols?_=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:_=function(t){return Object.getOwnPropertyNames(t)};function H(e){console&&console.warn&&console.warn(e)}var x=Number.isNaN||function(t){return t!==t};function c(){c.init.call(this)}y.exports=c;y.exports.once=F;c.EventEmitter=c;c.prototype._events=void 0;c.prototype._eventsCount=0;c.prototype._maxListeners=void 0;var E=10;function p(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return E},set:function(e){if(typeof e!="number"||e<0||x(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");E=e}});c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};c.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||x(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function O(e){return e._maxListeners===void 0?c.defaultMaxListeners:e._maxListeners}c.prototype.getMaxListeners=function(){return O(this)};c.prototype.emit=function(t){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var s=t==="error",o=this._events;if(o!==void 0)s=s&&o.error===void 0;else if(!s)return!1;if(s){var r;if(n.length>0&&(r=n[0]),r instanceof Error)throw r;var u=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw u.context=r,u}var a=o[t];if(a===void 0)return!1;if(typeof a=="function")L(a,this,n);else for(var f=a.length,h=A(a,f),i=0;i<f;++i)L(h[i],this,n);return!0};function C(e,t,n,i){var s,o,r;if(p(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),r=o[t]),r===void 0)r=o[t]=n,++e._eventsCount;else if(typeof r=="function"?r=o[t]=i?[n,r]:[r,n]:i?r.unshift(n):r.push(n),s=O(e),s>0&&r.length>s&&!r.warned){r.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=r.length,H(u)}return e}c.prototype.addListener=function(t,n){return C(this,t,n,!1)};c.prototype.on=c.prototype.addListener;c.prototype.prependListener=function(t,n){return C(this,t,n,!0)};function $(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function M(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=$.bind(i);return s.listener=n,i.wrapFn=s,s}c.prototype.once=function(t,n){return p(n),this.on(t,M(this,t,n)),this};c.prototype.prependOnceListener=function(t,n){return p(n),this.prependListener(t,M(this,t,n)),this};c.prototype.removeListener=function(t,n){var i,s,o,r,u;if(p(n),s=this._events,s===void 0)return this;if(i=s[t],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||n));else if(typeof i!="function"){for(o=-1,r=i.length-1;r>=0;r--)if(i[r]===n||i[r].listener===n){u=i[r].listener,o=r;break}if(o<0)return this;o===0?i.shift():V(i,o),i.length===1&&(s[t]=i[0]),s.removeListener!==void 0&&this.emit("removeListener",t,u||n)}return this};c.prototype.off=c.prototype.removeListener;c.prototype.removeAllListeners=function(t){var n,i,s;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var o=Object.keys(i),r;for(s=0;s<o.length;++s)r=o[s],r!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(t,n[s]);return this};function R(e,t,n){var i=e._events;if(i===void 0)return[];var s=i[t];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?W(s):A(s,s.length)}c.prototype.listeners=function(t){return R(this,t,!0)};c.prototype.rawListeners=function(t){return R(this,t,!1)};c.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):j.call(e,t)};c.prototype.listenerCount=j;function j(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}c.prototype.eventNames=function(){return this._eventsCount>0?_(this._events):[]};function A(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function V(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function W(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function F(e,t){return new Promise(function(n,i){function s(r){e.removeListener(t,o),i(r)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",s),n([].slice.call(arguments))}P(e,t,o,{once:!0}),t!=="error"&&K(e,s,{once:!0})})}function K(e,t,n){typeof e.on=="function"&&P(e,"error",t,n)}function P(e,t,n,i){if(typeof e.on=="function")i.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(o){i.once&&e.removeEventListener(t,s),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var G=y.exports,m="_ping",Y="_pong",w="/auth",q=["camera","microphone","autoplay","fullscreen","display-capture"].join(";");function J(e,t,{target:n,features:i,attached:s}){if(e instanceof Window)return e.open(t,n,i);s||document.body.appendChild(e);const o=document.createElement("iframe");return Object.assign(o.style,{...N(s),title:`widget-${Date.now()}`,border:"none",width:"100%",height:"100%"}),e.appendChild(Object.assign(o,{allow:q,src:t})),o}function N(e){return{display:e?"block":"none"}}function v(e,t){for(const n of Object.keys(t)){const i=t[n];i!=null&&e.searchParams.set(n,String(i))}e.pathname!==w&&e.searchParams.set("events","true")}var k=class{constructor({container:e,domain:t,sso:n,target:{name:i,features:s,checkExisting:o}={}},r=!1){if(this.emitter=new G.EventEmitter,this._attached=!0,this._container=null,this._instance=null,this._checkExisting=!1,this._ready=!1,this._load=async u=>{if(!(!this._container||this._instance)){if(typeof u.redirect_url=="string"){const a=new URL(u.redirect_url,this._url);v(a,{...u,redirect_url:null}),this._url.pathname===w?v(this._url,{remember_me:this._container===window?"1":"0",redirect_url:`${a.pathname}${a.search}${a.hash}`}):this._url=a}else v(this._url,u);if(this._checkExisting&&(await new Promise(a=>{if(this.once("widget.LOAD",a),setTimeout(a,1500),"BroadcastChannel"in self){const f=new BroadcastChannel("widget-channel");f.postMessage(m),f.close()}}),this._instance)){this._send("widget",Y);return}if(this._container){this._instance=J(this._container,this._url.href,{target:this._target,features:this._features,attached:this._attached});try{this._instance.onerror=a=>{this._error=a,this.emit("widget.ERROR",a instanceof Error?a.message:a)}}catch{this.emit("widget.ERROR","Unable to open")}}}},this._beforeUnload=u=>{this.wnd&&!this.wnd.closed&&this._send("widget",m,{name:this._target})},this._processEvent=({data:u,source:a})=>{if(!this._instance&&u){const{type:f,event:h,name:d}=u;if(f==="widget"&&h===m&&d===this._target){this._instance=a,this._ready=!0,this.emit("widget.LOAD");return}}if(a===this.wnd){const{type:f,event:h,...d}=u;if(f&&h){switch(h){case"READY":this._ready=!0,this.emit("widget.LOAD");break;case"UNLOAD":this.unload(),this.emit("widget.UNLOAD");break;case m:return}this.emit(`${f}.${h}`,d)}}},this._send=(u,a,f={})=>{var h;(h=this.wnd)==null||h.postMessage({type:u,action:a,...f},"*")},e&&(typeof e=="string"?this._container=document.querySelector(e):(this._container=e,e instanceof HTMLElement&&(this._attached=document.body.contains(e)))),!this._container)throw new Error("Unable to locate the container element");if(this._url=new URL(`https://${t}`),n){const{hostId:u,token:a}=n;if(!u||!a)throw new Error("Missing SSO parameters");this._url.pathname=w,this._url.searchParams.set("host_id",String(u)),this._url.searchParams.set("login_token_public_key",a)}window.addEventListener("message",this._processEvent),this._container===window&&window.addEventListener("beforeunload",this._beforeUnload),this._target=i,this._features=s,this._checkExisting=!!(i&&o),r&&this._load({redirect_url:"/page_to_see"})}unload(){var e;this._container=null,window.removeEventListener("message",this._processEvent),window.removeEventListener("beforeunload",this._beforeUnload),this._instance&&(this._instance instanceof Element?(!this._attached&&this._instance.style.display==="none"&&((e=this._instance.parentElement)==null||e.remove()),this._instance.remove()):this._instance.close(),this._instance=null),this._ready=!1}toggle(e){this._instance instanceof HTMLElement&&Object.assign(this._instance.style,N(e))}get isReady(){return this._ready}get instance(){return this._instance}get wnd(){return this._instance?this._instance instanceof Element?this._instance.contentWindow:this._instance:null}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}once(e,t){return this.emitter.once(e,t),this}emit(e,t){return this.emitter.emit(e,t)}removeAllListeners(e){return this.emitter.removeAllListeners(e),this}},z=(e=>(e.None="",e.Team="Team",e.Drive="Drive",e.Contacts="Contacts",e.Meet="Meet",e))(z||{}),Q=(e=>(e.full="full",e.list="list",e.main="main",e.none="none",e))(Q||{}),oe=class extends k{constructor(e,t="",n={}){switch(super(e),t){case"Team":case"Drive":case"Contacts":case"Meet":this.once("dashboard.READY",()=>this.load(t,n));break}this._load({redirect_url:"/conf/loading"})}load(e,t={}){this._send("dashboard","load",{service:e,...t})}go(e){this._send("dashboard","go",{delta:e})}setHiddenElements(e){this._send("dashboard","setHiddenElements",{ids:e})}},X=class extends k{constructor(e){super(e),this.setVideoInput=t=>{this._send("device","setVideoInput",{deviceId:t})},this.setAudioInput=t=>{this._send("device","setAudioInput",{deviceId:t})},this.setAudioOutput=t=>{this._send("device","setAudioOutput",{deviceId:t})},this.setCamera=t=>{this._send("conference",t===!0?"startCamera":"stopCamera")},this.setMute=t=>{this._send("conference",t===!0?"mute":"unmute")},this.setIncomingVideo=t=>{this._send("conference",t===!0?"enableIncomingVideo":"disableIncomingVideo")},this.setVolume=t=>{if(typeof t=="number"){if(t<0||t>1)throw new RangeError("volume")}else throw new TypeError;this._send("conference","setVolume",{volumn:t})},this.muteParticipant=t=>{t>0&&this._send("participant","mute",{id:t})},this.adjustParticipantAudio=(t,n)=>{const{volume:i,pan:s}=n;if(typeof i!="number"&&typeof s!="number")throw new TypeError;if(typeof i=="number"&&(i<0||i>1))throw new RangeError("volume");if(typeof s=="number"&&(s<-1||s>1))throw new RangeError("pan");t>0&&this._send("participant","adjustAudio",{id:t,volume:i,pan:s})}}},ae=class extends X{constructor(e,t,n={}){super(e);const{target:{autoClose:i}={}}=e,{name:s,skipJoin:o,mute:{mic:r,camera:u}={},observer:a,moderatorToken:f,resolution:h,view:d,tiles:D,audioLevel:T,stripLayout:B,autoView:S,afterCallUrl:U}=n;this._load({redirect_url:`/conf/call/${t}`,name:s,skip_join:o,observer:a,moderator_token:f,res:h,view:d,tiles:D,audio_level:T,strip_layout:B,auto_view:S,after_call_url:U,auto_close:i,mute:[r&&"mic",u&&"camera"].filter(Boolean).join(",")||void 0})}};const Z="_menuButton_4pe5b_1",ee="_hideDashboardElementsButton_4pe5b_31",te="_multiSelectHideDashboardElements_4pe5b_39",ne="_left_4pe5b_75",ie="_right_4pe5b_83",se="_extraMenu_4pe5b_91",g={menuButton:Z,hideDashboardElementsButton:ee,multiSelectHideDashboardElements:te,left:ne,right:ie,extraMenu:se};function ue({position:e="left"}){const t=I(),n=()=>{console.log("Menu Button Clicked, Go To the Menu Page."),t("/iotum-samples/menu")},i=e==="right"?g.right:g.left;return b.jsx("div",{children:b.jsx("button",{className:`${g.menuButton} ${i}`,onClick:n,children:"Menu Page"})})}export{oe as D,Q as L,ue as M,z as S,g as a,ae as b};
