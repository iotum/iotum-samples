import{c as I,j as y}from"./index-BXCog4K2.js";var w={exports:{}},l=typeof Reflect=="object"?Reflect:null,b=l&&typeof l.apply=="function"?l.apply:function(t,n,s){return Function.prototype.apply.call(t,n,s)},_;l&&typeof l.ownKeys=="function"?_=l.ownKeys:Object.getOwnPropertySymbols?_=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:_=function(t){return Object.getOwnPropertyNames(t)};function U(e){console&&console.warn&&console.warn(e)}var E=Number.isNaN||function(t){return t!==t};function c(){c.init.call(this)}w.exports=c;w.exports.once=W;c.EventEmitter=c;c.prototype._events=void 0;c.prototype._eventsCount=0;c.prototype._maxListeners=void 0;var L=10;function p(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return L},set:function(e){if(typeof e!="number"||e<0||E(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");L=e}});c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};c.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||E(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function x(e){return e._maxListeners===void 0?c.defaultMaxListeners:e._maxListeners}c.prototype.getMaxListeners=function(){return x(this)};c.prototype.emit=function(t){for(var n=[],s=1;s<arguments.length;s++)n.push(arguments[s]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var r;if(n.length>0&&(r=n[0]),r instanceof Error)throw r;var u=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw u.context=r,u}var a=o[t];if(a===void 0)return!1;if(typeof a=="function")b(a,this,n);else for(var f=a.length,h=j(a,f),s=0;s<f;++s)b(h[s],this,n);return!0};function O(e,t,n,s){var i,o,r;if(p(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),r=o[t]),r===void 0)r=o[t]=n,++e._eventsCount;else if(typeof r=="function"?r=o[t]=s?[n,r]:[r,n]:s?r.unshift(n):r.push(n),i=x(e),i>0&&r.length>i&&!r.warned){r.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=r.length,U(u)}return e}c.prototype.addListener=function(t,n){return O(this,t,n,!1)};c.prototype.on=c.prototype.addListener;c.prototype.prependListener=function(t,n){return O(this,t,n,!0)};function $(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function C(e,t,n){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=$.bind(s);return i.listener=n,s.wrapFn=i,i}c.prototype.once=function(t,n){return p(n),this.on(t,C(this,t,n)),this};c.prototype.prependOnceListener=function(t,n){return p(n),this.prependListener(t,C(this,t,n)),this};c.prototype.removeListener=function(t,n){var s,i,o,r,u;if(p(n),i=this._events,i===void 0)return this;if(s=i[t],s===void 0)return this;if(s===n||s.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,s.listener||n));else if(typeof s!="function"){for(o=-1,r=s.length-1;r>=0;r--)if(s[r]===n||s[r].listener===n){u=s[r].listener,o=r;break}if(o<0)return this;o===0?s.shift():H(s,o),s.length===1&&(i[t]=s[0]),i.removeListener!==void 0&&this.emit("removeListener",t,u||n)}return this};c.prototype.off=c.prototype.removeListener;c.prototype.removeAllListeners=function(t){var n,s,i;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[t]),this;if(arguments.length===0){var o=Object.keys(s),r;for(i=0;i<o.length;++i)r=o[i],r!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=s[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function M(e,t,n){var s=e._events;if(s===void 0)return[];var i=s[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?V(i):j(i,i.length)}c.prototype.listeners=function(t){return M(this,t,!0)};c.prototype.rawListeners=function(t){return M(this,t,!1)};c.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):R.call(e,t)};c.prototype.listenerCount=R;function R(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}c.prototype.eventNames=function(){return this._eventsCount>0?_(this._events):[]};function j(e,t){for(var n=new Array(t),s=0;s<t;++s)n[s]=e[s];return n}function H(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function V(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function W(e,t){return new Promise(function(n,s){function i(r){e.removeListener(t,o),s(r)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}A(e,t,o,{once:!0}),t!=="error"&&F(e,i,{once:!0})})}function F(e,t,n){typeof e.on=="function"&&A(e,"error",t,n)}function A(e,t,n,s){if(typeof e.on=="function")s.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(o){s.once&&e.removeEventListener(t,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var K=w.exports,m="_ping",G="_pong",Y=["camera","microphone","autoplay","fullscreen","display-capture"].join(";");function q(e,t,{target:n,features:s,attached:i}){if(e instanceof Window)return e.open(t,n,s);i||document.body.appendChild(e);const o=document.createElement("iframe");return Object.assign(o.style,{...P(i),title:`widget-${Date.now()}`,border:"none",width:"100%",height:"100%"}),e.appendChild(Object.assign(o,{allow:Y,src:t})),o}function P(e){return{display:e?"block":"none"}}function v(e,t){for(const n of Object.keys(t)){const s=t[n];s!=null&&e.searchParams.set(n,String(s))}e.searchParams.set("events","true")}var N=class{constructor({container:e,domain:t,sso:n,target:{name:s,features:i,checkExisting:o}={}},r=!1){if(this.emitter=new K.EventEmitter,this._attached=!0,this._container=null,this._instance=null,this._checkExisting=!1,this._ready=!1,this._load=async u=>{if(!(!this._container||this._instance)){if(typeof u.redirect_url=="string"){const a=new URL(u.redirect_url,this._url);v(a,{...u,redirect_url:null}),this._url.pathname==="/auth"?v(this._url,{redirect_url:`${a.pathname}${a.search}${a.hash}`}):this._url=a}else v(this._url,u);if(this._checkExisting&&(await new Promise(a=>{if(this.once("widget.LOAD",a),setTimeout(a,1500),"BroadcastChannel"in self){const f=new BroadcastChannel("widget-channel");f.postMessage(m),f.close()}}),this._instance)){this._send("widget",G);return}if(this._container){this._instance=q(this._container,this._url.href,{target:this._target,features:this._features,attached:this._attached});try{this._instance.onerror=a=>{this._error=a,this.emit("widget.ERROR",a instanceof Error?a.message:a)}}catch{this.emit("widget.ERROR","Unable to open")}}}},this._beforeUnload=u=>{this.wnd&&!this.wnd.closed&&this._send("widget",m,{name:this._target})},this._processEvent=({data:u,source:a})=>{if(!this._instance&&u){const{type:f,event:h,name:d}=u;if(f==="widget"&&h===m&&d===this._target){this._instance=a,this._ready=!0,this.emit("widget.LOAD");return}}if(a===this.wnd){const{type:f,event:h,...d}=u;if(f&&h){switch(h){case"READY":this._ready=!0,this.emit("widget.LOAD");break;case"UNLOAD":this.unload(),this.emit("widget.UNLOAD");break;case m:return}this.emit(`${f}.${h}`,d)}}},this._send=(u,a,f={})=>{var h;(h=this.wnd)==null||h.postMessage({type:u,action:a,...f},"*")},e&&(typeof e=="string"?this._container=document.querySelector(e):(this._container=e,e instanceof HTMLElement&&(this._attached=document.body.contains(e)))),!this._container)throw new Error("Unable to locate the container element");if(this._url=new URL(`https://${t}`),n){const{hostId:u,token:a}=n;if(!u||!a)throw new Error("Missing SSO parameters");this._url.pathname="/auth",this._url.searchParams.set("host_id",String(u)),this._url.searchParams.set("login_token_public_key",a)}window.addEventListener("message",this._processEvent),this._container===window&&window.addEventListener("beforeunload",this._beforeUnload),this._target=s,this._features=i,this._checkExisting=!!(s&&o),r&&this._load({redirect_url:"/page_to_see"})}unload(){var e;this._container=null,window.removeEventListener("message",this._processEvent),window.removeEventListener("beforeunload",this._beforeUnload),this._instance&&(this._instance instanceof Element?(!this._attached&&this._instance.style.display==="none"&&((e=this._instance.parentElement)==null||e.remove()),this._instance.remove()):this._instance.close(),this._instance=null),this._ready=!1}toggle(e){this._instance instanceof HTMLElement&&Object.assign(this._instance.style,P(e))}get isReady(){return this._ready}get instance(){return this._instance}get wnd(){return this._instance?this._instance instanceof Element?this._instance.contentWindow:this._instance:null}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}once(e,t){return this.emitter.once(e,t),this}emit(e,t){return this.emitter.emit(e,t)}removeAllListeners(e){return this.emitter.removeAllListeners(e),this}},J=(e=>(e.None="",e.Team="Team",e.Drive="Drive",e.Contacts="Contacts",e.Meet="Meet",e))(J||{}),z=(e=>(e.full="full",e.list="list",e.main="main",e.none="none",e))(z||{}),re=class extends N{constructor(e,t="",n={}){switch(super(e),t){case"Team":case"Drive":case"Contacts":case"Meet":this.once("dashboard.READY",()=>this.load(t,n));break}this._load({redirect_url:"/conf/loading"})}load(e,t={}){this._send("dashboard","load",{service:e,...t})}go(e){this._send("dashboard","go",{delta:e})}setHiddenElements(e){this._send("dashboard","setHiddenElements",{ids:e})}},Q=class extends N{constructor(e){super(e),this.setVideoInput=t=>{this._send("device","setVideoInput",{deviceId:t})},this.setAudioInput=t=>{this._send("device","setAudioInput",{deviceId:t})},this.setAudioOutput=t=>{this._send("device","setAudioOutput",{deviceId:t})},this.setCamera=t=>{this._send("conference",t===!0?"startCamera":"stopCamera")},this.setMute=t=>{this._send("conference",t===!0?"mute":"unmute")},this.setIncomingVideo=t=>{this._send("conference",t===!0?"enableIncomingVideo":"disableIncomingVideo")},this.setVolume=t=>{if(typeof t=="number"){if(t<0||t>1)throw new RangeError("volume")}else throw new TypeError;this._send("conference","setVolume",{volumn:t})},this.muteParticipant=t=>{t>0&&this._send("participant","mute",{id:t})},this.adjustParticipantAudio=(t,n)=>{const{volume:s,pan:i}=n;if(typeof s!="number"&&typeof i!="number")throw new TypeError;if(typeof s=="number"&&(s<0||s>1))throw new RangeError("volume");if(typeof i=="number"&&(i<-1||i>1))throw new RangeError("pan");t>0&&this._send("participant","adjustAudio",{id:t,volume:s,pan:i})}}},oe=class extends Q{constructor(e,t,n={}){super(e);const{target:{autoClose:s}={}}=e,{name:i,skipJoin:o,mute:{mic:r,camera:u}={},observer:a,moderatorToken:f,resolution:h,view:d,tiles:k,audioLevel:D,stripLayout:T,autoView:B,afterCallUrl:S}=n;this._load({redirect_url:`/conf/call/${t}`,name:i,skip_join:o,observer:a,moderator_token:f,res:h,view:d,tiles:k,audio_level:D,strip_layout:T,auto_view:B,after_call_url:S,auto_close:s,mute:[r&&"mic",u&&"camera"].filter(Boolean).join(",")||void 0})}};const X="_menuButton_4pe5b_1",Z="_hideDashboardElementsButton_4pe5b_31",ee="_multiSelectHideDashboardElements_4pe5b_39",te="_left_4pe5b_75",ne="_right_4pe5b_83",se="_extraMenu_4pe5b_91",g={menuButton:X,hideDashboardElementsButton:Z,multiSelectHideDashboardElements:ee,left:te,right:ne,extraMenu:se};function ae({position:e="left"}){const t=I(),n=()=>{console.log("Menu Button Clicked, Go To the Menu Page."),t("/iotum-samples/menu")},s=e==="right"?g.right:g.left;return y.jsx("div",{children:y.jsx("button",{className:`${g.menuButton} ${s}`,onClick:n,children:"Menu Page"})})}export{re as D,z as L,ae as M,J as S,g as a,oe as b};
